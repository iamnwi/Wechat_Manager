<html>
<head>
<link rel="stylesheet" type="text/css" href="/static/js/fullPage/dist/jquery.fullPage.css" />

<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>

<!-- This following line is optional. Only necessary if you use the option css3:false and you want to use other easing effects rather than "linear", "swing" or "easeInOutCubic". -->
<script src="/static/js/fullPage/vendors/jquery.easings.min.js"></script>


<!-- This following line is only necessary in the case of using the option `scrollOverflow:true` -->
<script type="text/javascript" src="/static/js/fullPage/vendors/scrolloverflow.min.js"></script>

<script type="text/javascript" src="/static/js/fullPage/dist/jquery.fullPage.js"></script>

<script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.4.0/Chart.min.js"></script>

<script>
  function draw_bar(chart_id) {
    var ctx = document.getElementById(chart_id).getContext('2d');
    var myChart = new Chart(ctx, {
        type: 'bar',
        data: {
            labels: ["Red", "Blue", "Yellow", "Green", "Purple", "Orange"],
            datasets: [{
                label: '# of Votes',
                data: [12, 19, 3, 5, 2, 3],
                backgroundColor: [
                    'rgba(255, 99, 132, 0.2)',
                    'rgba(54, 162, 235, 0.2)',
                    'rgba(255, 206, 86, 0.2)',
                    'rgba(75, 192, 192, 0.2)',
                    'rgba(153, 102, 255, 0.2)',
                    'rgba(255, 159, 64, 0.2)'
                ],
                borderColor: [
                    'rgba(255,99,132,1)',
                    'rgba(54, 162, 235, 1)',
                    'rgba(255, 206, 86, 1)',
                    'rgba(75, 192, 192, 1)',
                    'rgba(153, 102, 255, 1)',
                    'rgba(255, 159, 64, 1)'
                ],
                borderWidth: 1
            }]
        },
        options: {
            scales: {
                yAxes: [{
                    ticks: {
                        beginAtZero:true
                    }
                }]
            }
        }
    });
  }

  function draw_doughnut(chart_id) {
    // And for a doughnut chart
    var ctx = document.getElementById(chart_id).getContext('2d');
    var myDoughnutChart = new Chart(ctx, {
        type: 'doughnut',
        data: {
          datasets: [{
              data: [300, 50, 100],
              backgroundColor: [
                'rgba(255, 99, 132, 0.2)',
                'rgba(54, 162, 235, 0.2)',
                'rgba(255, 206, 86, 0.2)',
              ]
          }],

          // These labels appear in the legend and in the tooltips when hovering different arcs
          labels: [
              'Red',
              'Yellow',
              'Blue'
          ]
        },
        // options: options
    });
  }

  $(document).ready(function() {
  	$('#fullpage').fullpage({
      anchors: ['firstPage', 'secondPage', 'thirdPage', 'lastPage'],

      // onLeave: function(index, nextIndex, direction){
    	// 	var leavingSection = $(this);
      //
      //   if (nextIndex == 1) {
      //     setTimeout(function() {draw_bar("s1_chart")}, 800);
      //   }
      //   else if (nextIndex == 2) {
      //     setTimeout(function() {draw_doughnut("s2_chart")}, 800);
      //   }
    	// }

      afterLoad: function(anchorLink, index){
    		var loadedSection = $(this);

    		//using index
    		if(anchorLink == 'firstPage'){
          draw_bar("s1_chart")
    		}

    		//using anchorLink
    		if(anchorLink == 'secondPage'){
          draw_doughnut("s2_chart")
    		}
    	}
    });
  });
</script>
<head/>

<body>
  <div id="fullpage">
  	<div class="section">
      <canvas id="s1_chart" width="400" height="400"></canvas>
    </div>
  	<div class="section">
      <canvas id="s2_chart" width="400" height="400"></canvas>
    </div>
  	<div class="section">Some section 3</div>
  	<div class="section">Some section 4</div>
  </div>
</body>
</html>
